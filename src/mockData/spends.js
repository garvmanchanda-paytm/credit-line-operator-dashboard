export const dailySuccessRate = [
  { date: 'Feb 07', sr: 83.7 },
  { date: 'Feb 08', sr: 84.7 },
  { date: 'Feb 09', sr: 84.9 },
  { date: 'Feb 10', sr: 80.5 },
  { date: 'Feb 11', sr: 83.4 },
  { date: 'Feb 12', sr: 83.7 },
  { date: 'Feb 13', sr: 79.5 },
  { date: 'Feb 14', sr: 81.1 },
  { date: 'Feb 15', sr: 81.9 },
  { date: 'Feb 16', sr: 81.9 },
  { date: 'Feb 17', sr: 81.9 },
  { date: 'Feb 18', sr: 82.0 },
  { date: 'Feb 19', sr: 82.1 },
  { date: 'Feb 20', sr: 82.4 },
  { date: 'Feb 21', sr: 80.1 },
];

export const avgSR = (() => {
  const vals = dailySuccessRate.map(d => d.sr);
  return parseFloat((vals.reduce((a, b) => a + b, 0) / vals.length).toFixed(1));
})();

export const errorCodes = [
  { rank: 1, code: 'U29-SA',   description: 'Acquirer / Bank decline',   avgDailyCount: 2800, pctOfFailures: 18.0, trend: 'stable',    dailyCounts: [2750, 2810, 2830, 2790, 2800, 2780, 2820] },
  { rank: 2, code: 'U30-ZM',   description: 'UPI timeout / network',     avgDailyCount: 2400, pctOfFailures: 15.0, trend: 'rising',     dailyCounts: [2100, 2200, 2300, 2350, 2450, 2500, 2600] },
  { rank: 3, code: 'U30-Z9',   description: 'Beneficiary bank down',     avgDailyCount: 2200, pctOfFailures: 14.0, trend: 'spike',      dailyCounts: [2100, 2150, 6500, 2300, 2250, 2200, 2180] },
  { rank: 4, code: 'U30-VM',   description: 'Transaction limit exceeded', avgDailyCount: 1800, pctOfFailures: 11.0, trend: 'stable',    dailyCounts: [1780, 1810, 1790, 1820, 1800, 1780, 1810] },
  { rank: 5, code: 'INT-1453', description: 'Internal processing error',  avgDailyCount: 1600, pctOfFailures: 10.0, trend: 'improving', dailyCounts: [1900, 1850, 1750, 1700, 1600, 1550, 1500] },
  { rank: 6, code: 'U16-01091', description: 'Invalid VPA / payee',      avgDailyCount: 1400, pctOfFailures: 9.0,  trend: 'stable',    dailyCounts: [1380, 1410, 1400, 1390, 1420, 1400, 1410] },
  { rank: 7, code: 'OTHERS',   description: 'All remaining codes',        avgDailyCount: 4000, pctOfFailures: 25.0, trend: 'stable',    dailyCounts: [3950, 4020, 4010, 3980, 4050, 4000, 3990] },
];

const now = new Date();
const ts = (hrsAgo, minsAgo = 0) => new Date(now.getTime() - hrsAgo * 3600000 - minsAgo * 60000).toISOString();

export const errorCodeDetails = {
  'U29-SA': {
    code: 'U29-SA',
    description: 'Acquirer / Bank decline',
    longDescription: 'The acquiring bank has declined the transaction. This typically happens when the issuing bank rejects the UPI collect/pay request due to insufficient funds, account restrictions, or daily transaction limits imposed by the bank. Persistent spikes may indicate a partner bank outage or config change.',
    severity: 'stable',
    avgDailyCount: 2800,
    pctOfFailures: 18.0,
    dailyTrend: [
      { date: 'Feb 15', count: 2750, sr: 81.9 },
      { date: 'Feb 16', count: 2810, sr: 81.9 },
      { date: 'Feb 17', count: 2830, sr: 81.9 },
      { date: 'Feb 18', count: 2790, sr: 82.0 },
      { date: 'Feb 19', count: 2800, sr: 82.1 },
      { date: 'Feb 20', count: 2780, sr: 82.4 },
      { date: 'Feb 21', count: 2820, sr: 80.1 },
    ],
    logs: [
      { timestamp: ts(0, 12), endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_50120101', amount: 4500, bank: 'HDFC', reason: 'INSUFFICIENT_FUNDS' },
      { timestamp: ts(0, 28), endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_50120215', amount: 1200, bank: 'SBI', reason: 'ACCOUNT_BLOCKED' },
      { timestamp: ts(0, 45), endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_50120330', amount: 8900, bank: 'ICICI', reason: 'DAILY_LIMIT_EXCEEDED' },
      { timestamp: ts(1, 5),  endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_50120448', amount: 2300, bank: 'HDFC', reason: 'INSUFFICIENT_FUNDS' },
      { timestamp: ts(1, 22), endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_50120562', amount: 15000, bank: 'AXIS', reason: 'ACCOUNT_DORMANT' },
      { timestamp: ts(2, 10), endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_50120678', amount: 3600, bank: 'PNB', reason: 'INSUFFICIENT_FUNDS' },
      { timestamp: ts(3, 5),  endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_50120790', amount: 6700, bank: 'SBI', reason: 'DAILY_LIMIT_EXCEEDED' },
      { timestamp: ts(4, 30), endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_50120812', amount: 950, bank: 'BOB', reason: 'INSUFFICIENT_FUNDS' },
      { timestamp: ts(6, 15), endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_50120934', amount: 11200, bank: 'HDFC', reason: 'ACCOUNT_BLOCKED' },
      { timestamp: ts(8, 0),  endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_50121045', amount: 2100, bank: 'ICICI', reason: 'INSUFFICIENT_FUNDS' },
      { timestamp: ts(10, 20), endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_50121158', amount: 7400, bank: 'SBI', reason: 'DAILY_LIMIT_EXCEEDED' },
      { timestamp: ts(12, 45), endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_50121270', amount: 1800, bank: 'HDFC', reason: 'INSUFFICIENT_FUNDS' },
      { timestamp: ts(15, 10), endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_50121389', amount: 5500, bank: 'AXIS', reason: 'ACCOUNT_DORMANT' },
      { timestamp: ts(18, 30), endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_50121490', amount: 3200, bank: 'PNB', reason: 'INSUFFICIENT_FUNDS' },
      { timestamp: ts(21, 0),  endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_50121502', amount: 9800, bank: 'SBI', reason: 'DAILY_LIMIT_EXCEEDED' },
    ],
  },
  'U30-ZM': {
    code: 'U30-ZM',
    description: 'UPI timeout / network',
    longDescription: 'The UPI transaction timed out due to network latency or partner bank processing delays. The request was sent but no acknowledgement was received within the stipulated time (typically 30s for collect, 15s for pay). Rising counts may indicate NPCI infrastructure degradation or a specific bank\'s PSP being overloaded.',
    severity: 'rising',
    avgDailyCount: 2400,
    pctOfFailures: 15.0,
    dailyTrend: [
      { date: 'Feb 15', count: 2100, sr: 81.9 },
      { date: 'Feb 16', count: 2200, sr: 81.9 },
      { date: 'Feb 17', count: 2300, sr: 81.9 },
      { date: 'Feb 18', count: 2350, sr: 82.0 },
      { date: 'Feb 19', count: 2450, sr: 82.1 },
      { date: 'Feb 20', count: 2500, sr: 82.4 },
      { date: 'Feb 21', count: 2600, sr: 80.1 },
    ],
    logs: [
      { timestamp: ts(0, 8),  endpoint: '/api/v1/upi/collect', responseCode: 504, customerId: 'PTM_U_60220101', amount: 5200, bank: 'SBI', reason: 'GATEWAY_TIMEOUT' },
      { timestamp: ts(0, 18), endpoint: '/api/v1/upi/pay', responseCode: 504, customerId: 'PTM_U_60220218', amount: 3100, bank: 'HDFC', reason: 'CONNECTION_TIMEOUT' },
      { timestamp: ts(0, 35), endpoint: '/api/v1/upi/collect', responseCode: 504, customerId: 'PTM_U_60220332', amount: 7800, bank: 'PNB', reason: 'GATEWAY_TIMEOUT' },
      { timestamp: ts(1, 12), endpoint: '/api/v1/upi/pay', responseCode: 504, customerId: 'PTM_U_60220445', amount: 1500, bank: 'ICICI', reason: 'READ_TIMEOUT' },
      { timestamp: ts(2, 0),  endpoint: '/api/v1/upi/collect', responseCode: 504, customerId: 'PTM_U_60220558', amount: 4400, bank: 'SBI', reason: 'GATEWAY_TIMEOUT' },
      { timestamp: ts(3, 20), endpoint: '/api/v1/upi/pay', responseCode: 504, customerId: 'PTM_U_60220670', amount: 9200, bank: 'AXIS', reason: 'CONNECTION_TIMEOUT' },
      { timestamp: ts(5, 0),  endpoint: '/api/v1/upi/collect', responseCode: 504, customerId: 'PTM_U_60220785', amount: 2600, bank: 'HDFC', reason: 'GATEWAY_TIMEOUT' },
      { timestamp: ts(7, 30), endpoint: '/api/v1/upi/pay', responseCode: 504, customerId: 'PTM_U_60220890', amount: 6100, bank: 'SBI', reason: 'READ_TIMEOUT' },
      { timestamp: ts(10, 15), endpoint: '/api/v1/upi/collect', responseCode: 504, customerId: 'PTM_U_60220912', amount: 3800, bank: 'PNB', reason: 'GATEWAY_TIMEOUT' },
      { timestamp: ts(14, 45), endpoint: '/api/v1/upi/pay', responseCode: 504, customerId: 'PTM_U_60221030', amount: 12500, bank: 'SBI', reason: 'CONNECTION_TIMEOUT' },
    ],
  },
  'U30-Z9': {
    code: 'U30-Z9',
    description: 'Beneficiary bank down',
    longDescription: 'The beneficiary bank\'s UPI infrastructure is unavailable or returning errors. A spike on Feb 17 (6,500 failures vs 2,200 avg) was caused by an SBI PSP outage from 2:15 PM to 4:40 PM IST. This is an external dependency — mitigation involves retries and routing to alternate paths where possible.',
    severity: 'spike',
    avgDailyCount: 2200,
    pctOfFailures: 14.0,
    dailyTrend: [
      { date: 'Feb 15', count: 2100, sr: 81.9 },
      { date: 'Feb 16', count: 2150, sr: 81.9 },
      { date: 'Feb 17', count: 6500, sr: 81.9 },
      { date: 'Feb 18', count: 2300, sr: 82.0 },
      { date: 'Feb 19', count: 2250, sr: 82.1 },
      { date: 'Feb 20', count: 2200, sr: 82.4 },
      { date: 'Feb 21', count: 2180, sr: 80.1 },
    ],
    logs: [
      { timestamp: ts(0, 5),  endpoint: '/api/v1/upi/pay', responseCode: 503, customerId: 'PTM_U_70330101', amount: 6500, bank: 'SBI', reason: 'BENEFICIARY_BANK_DOWN' },
      { timestamp: ts(0, 22), endpoint: '/api/v1/upi/collect', responseCode: 503, customerId: 'PTM_U_70330218', amount: 2800, bank: 'SBI', reason: 'BENEFICIARY_BANK_DOWN' },
      { timestamp: ts(0, 50), endpoint: '/api/v1/upi/pay', responseCode: 503, customerId: 'PTM_U_70330335', amount: 11000, bank: 'PNB', reason: 'BENEFICIARY_BANK_DOWN' },
      { timestamp: ts(1, 30), endpoint: '/api/v1/upi/collect', responseCode: 503, customerId: 'PTM_U_70330448', amount: 1900, bank: 'SBI', reason: 'SERVICE_UNAVAILABLE' },
      { timestamp: ts(2, 45), endpoint: '/api/v1/upi/pay', responseCode: 503, customerId: 'PTM_U_70330562', amount: 4200, bank: 'SBI', reason: 'BENEFICIARY_BANK_DOWN' },
      { timestamp: ts(4, 10), endpoint: '/api/v1/upi/collect', responseCode: 503, customerId: 'PTM_U_70330670', amount: 8700, bank: 'PNB', reason: 'BENEFICIARY_BANK_DOWN' },
      { timestamp: ts(6, 0),  endpoint: '/api/v1/upi/pay', responseCode: 503, customerId: 'PTM_U_70330789', amount: 3300, bank: 'SBI', reason: 'SERVICE_UNAVAILABLE' },
      { timestamp: ts(9, 20), endpoint: '/api/v1/upi/collect', responseCode: 503, customerId: 'PTM_U_70330890', amount: 5600, bank: 'SBI', reason: 'BENEFICIARY_BANK_DOWN' },
      { timestamp: ts(13, 0), endpoint: '/api/v1/upi/pay', responseCode: 503, customerId: 'PTM_U_70330912', amount: 2400, bank: 'PNB', reason: 'BENEFICIARY_BANK_DOWN' },
      { timestamp: ts(18, 30), endpoint: '/api/v1/upi/collect', responseCode: 503, customerId: 'PTM_U_70331025', amount: 7100, bank: 'SBI', reason: 'BENEFICIARY_BANK_DOWN' },
    ],
  },
  'U30-VM': {
    code: 'U30-VM',
    description: 'Transaction limit exceeded',
    longDescription: 'The customer has exceeded their daily/monthly UPI transaction limit set by their bank or as per RBI guidelines. These are user-driven errors and generally not actionable from a system health perspective. Monitor for unusual volume spikes that may indicate bot activity.',
    severity: 'stable',
    avgDailyCount: 1800,
    pctOfFailures: 11.0,
    dailyTrend: [
      { date: 'Feb 15', count: 1780, sr: 81.9 },
      { date: 'Feb 16', count: 1810, sr: 81.9 },
      { date: 'Feb 17', count: 1790, sr: 81.9 },
      { date: 'Feb 18', count: 1820, sr: 82.0 },
      { date: 'Feb 19', count: 1800, sr: 82.1 },
      { date: 'Feb 20', count: 1780, sr: 82.4 },
      { date: 'Feb 21', count: 1810, sr: 80.1 },
    ],
    logs: [
      { timestamp: ts(0, 15), endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_80440101', amount: 25000, bank: 'HDFC', reason: 'DAILY_LIMIT_EXCEEDED' },
      { timestamp: ts(0, 40), endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_80440218', amount: 50000, bank: 'SBI', reason: 'MONTHLY_LIMIT_EXCEEDED' },
      { timestamp: ts(1, 20), endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_80440332', amount: 100000, bank: 'ICICI', reason: 'SINGLE_TXN_LIMIT' },
      { timestamp: ts(2, 50), endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_80440445', amount: 35000, bank: 'AXIS', reason: 'DAILY_LIMIT_EXCEEDED' },
      { timestamp: ts(5, 10), endpoint: '/api/v1/upi/pay', responseCode: 400, customerId: 'PTM_U_80440558', amount: 20000, bank: 'HDFC', reason: 'DAILY_LIMIT_EXCEEDED' },
      { timestamp: ts(8, 0),  endpoint: '/api/v1/upi/collect', responseCode: 400, customerId: 'PTM_U_80440670', amount: 75000, bank: 'SBI', reason: 'MONTHLY_LIMIT_EXCEEDED' },
    ],
  },
  'INT-1453': {
    code: 'INT-1453',
    description: 'Internal processing error',
    longDescription: 'An internal system error occurred during transaction processing. This is typically a Paytm-side issue — could be a queue overflow, DB write failure, or service mesh timeout. The improving trend suggests recent infrastructure fixes are taking effect. Monitor for regression.',
    severity: 'improving',
    avgDailyCount: 1600,
    pctOfFailures: 10.0,
    dailyTrend: [
      { date: 'Feb 15', count: 1900, sr: 81.9 },
      { date: 'Feb 16', count: 1850, sr: 81.9 },
      { date: 'Feb 17', count: 1750, sr: 81.9 },
      { date: 'Feb 18', count: 1700, sr: 82.0 },
      { date: 'Feb 19', count: 1600, sr: 82.1 },
      { date: 'Feb 20', count: 1550, sr: 82.4 },
      { date: 'Feb 21', count: 1500, sr: 80.1 },
    ],
    logs: [
      { timestamp: ts(0, 10), endpoint: '/api/v1/upi/internal/process', responseCode: 500, customerId: 'PTM_U_90550101', amount: 3200, bank: 'N/A', reason: 'INTERNAL_SERVER_ERROR' },
      { timestamp: ts(0, 32), endpoint: '/api/v1/upi/internal/process', responseCode: 500, customerId: 'PTM_U_90550218', amount: 7800, bank: 'N/A', reason: 'DB_WRITE_TIMEOUT' },
      { timestamp: ts(1, 5),  endpoint: '/api/v1/upi/internal/queue', responseCode: 503, customerId: 'PTM_U_90550335', amount: 1500, bank: 'N/A', reason: 'QUEUE_OVERFLOW' },
      { timestamp: ts(2, 20), endpoint: '/api/v1/upi/internal/process', responseCode: 500, customerId: 'PTM_U_90550448', amount: 4600, bank: 'N/A', reason: 'SERVICE_MESH_TIMEOUT' },
      { timestamp: ts(4, 0),  endpoint: '/api/v1/upi/internal/process', responseCode: 500, customerId: 'PTM_U_90550562', amount: 9100, bank: 'N/A', reason: 'INTERNAL_SERVER_ERROR' },
      { timestamp: ts(7, 45), endpoint: '/api/v1/upi/internal/queue', responseCode: 503, customerId: 'PTM_U_90550670', amount: 2200, bank: 'N/A', reason: 'QUEUE_OVERFLOW' },
      { timestamp: ts(12, 30), endpoint: '/api/v1/upi/internal/process', responseCode: 500, customerId: 'PTM_U_90550789', amount: 5800, bank: 'N/A', reason: 'DB_WRITE_TIMEOUT' },
    ],
  },
  'U16-01091': {
    code: 'U16-01091',
    description: 'Invalid VPA / payee',
    longDescription: 'The UPI Virtual Payment Address (VPA) entered by the user is invalid or does not exist. This is a user-input error. Consider adding VPA validation before submission and showing suggestions for common VPA formats.',
    severity: 'stable',
    avgDailyCount: 1400,
    pctOfFailures: 9.0,
    dailyTrend: [
      { date: 'Feb 15', count: 1380, sr: 81.9 },
      { date: 'Feb 16', count: 1410, sr: 81.9 },
      { date: 'Feb 17', count: 1400, sr: 81.9 },
      { date: 'Feb 18', count: 1390, sr: 82.0 },
      { date: 'Feb 19', count: 1420, sr: 82.1 },
      { date: 'Feb 20', count: 1400, sr: 82.4 },
      { date: 'Feb 21', count: 1410, sr: 80.1 },
    ],
    logs: [
      { timestamp: ts(0, 20), endpoint: '/api/v1/upi/validate-vpa', responseCode: 404, customerId: 'PTM_U_10660101', amount: 0, bank: 'N/A', reason: 'VPA_NOT_FOUND' },
      { timestamp: ts(0, 55), endpoint: '/api/v1/upi/validate-vpa', responseCode: 404, customerId: 'PTM_U_10660218', amount: 0, bank: 'N/A', reason: 'INVALID_VPA_FORMAT' },
      { timestamp: ts(1, 40), endpoint: '/api/v1/upi/validate-vpa', responseCode: 404, customerId: 'PTM_U_10660335', amount: 0, bank: 'N/A', reason: 'VPA_NOT_FOUND' },
      { timestamp: ts(3, 10), endpoint: '/api/v1/upi/validate-vpa', responseCode: 404, customerId: 'PTM_U_10660448', amount: 0, bank: 'N/A', reason: 'VPA_DEACTIVATED' },
      { timestamp: ts(6, 30), endpoint: '/api/v1/upi/validate-vpa', responseCode: 404, customerId: 'PTM_U_10660562', amount: 0, bank: 'N/A', reason: 'VPA_NOT_FOUND' },
    ],
  },
};

export const momGmvTxn = [
  { month: 'Sep-25', gmvCr: 1.21,   txnCount: 26600 },
  { month: 'Oct-25', gmvCr: 10.7,   txnCount: 236000 },
  { month: 'Nov-25', gmvCr: 25.3,   txnCount: 574000 },
  { month: 'Dec-25', gmvCr: 49.1,   txnCount: 1110000 },
  { month: 'Jan-26', gmvCr: 64.4,   txnCount: 1500000 },
  { month: 'Feb-26', gmvCr: 71.1,   txnCount: 1630000 },
];
